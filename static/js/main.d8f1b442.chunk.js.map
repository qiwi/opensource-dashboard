{"version":3,"sources":["../../../node_modules/@qiwi/pijma-core/lib/es5/fonts sync /^/.//MuseoSans_.*/.woff2$","../../../node_modules/@qiwi/pijma-core/lib/es5/fonts sync /^/.//MuseoSans_.*/.woff$","main/ts/components/org/header/index.tsx","main/ts/service/reportService.ts","main/ts/service/crawlerService.ts","main/ts/hooks/useAsyncExecutor.ts","main/ts/components/page/crawler/crawler.tsx","main/ts/components/page/reporter/constants.ts","main/ts/components/org/reportForm/treeReportForm.tsx","main/ts/components/org/reportForm/usageReportForm.tsx","main/ts/components/org/reportForm/versionsReportForm.tsx","main/ts/components/page/reporter/reporter.tsx","main/ts/components/env/layout/index.js","main/ts/components/env/content/index.js","main/ts/components/env/root/index.js","main/ts/components/env/spreader/index.js","main/ts/components/env/App.tsx","main/ts/components/env/index.tsx"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","Header","pathname","useLocation","history","useHistory","underline","width","height","justify","ml","align","shrink","mr","href","window","location","as","src","title","active","onClick","push","reportService","type","data","axios","get","params","stop","secret","a","post","headers","start","crawlerService","getStatus","then","running","useAsync","asyncFunction","useState","status","setStatus","value","setValue","error","setError","useCallback","undefined","response","catch","Crawler","statusStatus","isRunning","stopCrawler","statusStopCrawler","startCrawler","statusStartCrawler","setSecret","useEffect","mt","css","padding","mb","onChange","kind","size","text","treeDefault","depType","packageNamePattern","source","defaultTypes","tree","usage","versionRange","versions","TreeReportForm","setData","options","label","UsageReportForm","VersionsReportForm","downloadObjectAsJson","exportObj","exportName","dataStr","encodeURIComponent","JSON","stringify","downloadAnchorNode","document","createElement","setAttribute","body","appendChild","click","remove","reducer","state","action","getReport","Reporter","useReducer","execute","loading","disabled","injectGlobal","reset","fonts","Content","styled","Root","Spreader","App","cache","theme","themes","orange","path","ReactDOM","render","StrictMode","querySelector"],"mappings":"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","file":"static/js/main.d8f1b442.chunk.js","sourcesContent":["var map = {\n\t\"./MuseoSans_100_italic.woff2\": 135,\n\t\"./MuseoSans_100_normal.woff2\": 136,\n\t\"./MuseoSans_300_italic.woff2\": 137,\n\t\"./MuseoSans_300_normal.woff2\": 138,\n\t\"./MuseoSans_500_italic.woff2\": 139,\n\t\"./MuseoSans_500_normal.woff2\": 140,\n\t\"./MuseoSans_700_italic.woff2\": 141,\n\t\"./MuseoSans_700_normal.woff2\": 142,\n\t\"./MuseoSans_900_italic.woff2\": 143,\n\t\"./MuseoSans_900_normal.woff2\": 144\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 134;","var map = {\n\t\"./MuseoSans_100_italic.woff\": 146,\n\t\"./MuseoSans_100_normal.woff\": 147,\n\t\"./MuseoSans_300_italic.woff\": 148,\n\t\"./MuseoSans_300_normal.woff\": 149,\n\t\"./MuseoSans_500_italic.woff\": 150,\n\t\"./MuseoSans_500_normal.woff\": 151,\n\t\"./MuseoSans_700_italic.woff\": 152,\n\t\"./MuseoSans_700_normal.woff\": 153,\n\t\"./MuseoSans_900_italic.woff\": 154,\n\t\"./MuseoSans_900_normal.woff\": 155\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 145;","import { Box, Flex, FlexItem, Lnk } from '@qiwi/pijma-core'\nimport { Header as PijmaHeader, HeaderMenu } from '@qiwi/pijma-desktop'\nimport React from 'react'\nimport { useHistory, useLocation } from 'react-router-dom'\n\nexport const Header = () => {\n  const { pathname } = useLocation()\n  const history = useHistory()\n  return (\n    <PijmaHeader underline={true}>\n      <Flex width={1} height={1} justify=\"space-between\">\n        <FlexItem ml={6}>\n          <Flex height={1}>\n            <FlexItem align=\"center\" shrink={0} mr={11}>\n              <Lnk href={window.location.href}>\n                <Box\n                  as=\"img\"\n                  // @ts-ignore\n                  src=\"https://static.qiwi.com/img/qiwi_com/header/qiwi-wallet-logo.svg\"\n                  width={24}\n                  height={12}\n                />\n              </Lnk>\n            </FlexItem>\n            <FlexItem shrink={0} mr={6}>\n              <HeaderMenu>\n                {[\n                  {\n                    title: 'Reporter',\n                    active: pathname === '/',\n                    onClick: () => history.push('/'),\n                  },\n                  {\n                    title: 'Crawler',\n                    onClick: () => history.push('/crawler'),\n                    active: pathname === '/crawler',\n                  },\n                ]}\n              </HeaderMenu>\n            </FlexItem>\n          </Flex>\n        </FlexItem>\n      </Flex>\n    </PijmaHeader>\n  )\n}\n","import axios from 'axios'\n\nconst getReport = (type: string, data: Record<string, string>) => {\n  return axios.get(\n    `http://jslab-repocrawler-api.testing.qiwi.com/reporter/${type}`,\n    { params: data },\n  )\n}\n\nexport const reportService = {\n  getReport,\n}\n","import axios from 'axios'\n\nconst stop = async (secret: string) => {\n  return axios.post(\n    'http://jslab-repocrawler-api.testing.qiwi.com/crawler/stop',\n    {},\n    {\n      headers: {\n        'Magic-Auth': secret,\n      },\n    },\n  )\n}\n\nconst start = async (secret: string) => {\n  return axios.post(\n    'http://jslab-repocrawler-api.testing.qiwi.com/crawler/start',\n    {},\n    {\n      headers: {\n        'Magic-Auth': secret,\n      },\n    },\n  )\n}\n\nconst getStatus = async () => {\n  return axios\n    .get('http://jslab-repocrawler-api.testing.qiwi.com/crawler/status')\n    .then(({ data }) => data.running)\n}\n\nexport const crawlerService = {\n  getStatus,\n  start,\n  stop,\n}\n","import { useState, useCallback } from 'react'\n\nexport const useAsync = (asyncFunction: (...args: any[]) => Promise<any>) => {\n  const [status, setStatus] = useState('idle')\n  const [value, setValue] = useState<any | undefined>()\n  const [error, setError] = useState<any | undefined>()\n\n  const execute = useCallback((...args) => {\n    setStatus('pending')\n    setValue(undefined)\n    setError(undefined)\n    return asyncFunction(...args)\n      .then((response) => {\n        setValue(response)\n        setStatus('success')\n      })\n      .catch((error) => {\n        setError(error)\n        setStatus('error')\n      })\n  }, [])\n\n  return [execute, status, value, error]\n}\n","import { Block, Box, Flex } from '@qiwi/pijma-core'\nimport { Button, TextField } from '@qiwi/pijma-desktop'\nimport React, { useState, useEffect, Fragment } from 'react'\nimport { crawlerService } from '../../../service'\nimport { useAsync } from '../../../hooks/useAsyncExecutor'\n\nexport const Crawler = () => {\n  const [getStatus, statusStatus, isRunning] = useAsync(\n    crawlerService.getStatus,\n  )\n  const [stopCrawler, statusStopCrawler] = useAsync(crawlerService.stop)\n  const [startCrawler, statusStartCrawler] = useAsync(crawlerService.stop)\n  const [secret, setSecret] = useState('')\n\n  useEffect(() => {\n    getStatus()\n  }, [])\n\n  return (\n    <Flex mt={6}>\n      <Block css={{ width: '100%', padding: '48px' }}>\n        {statusStatus === 'pending' ||\n        statusStopCrawler === 'pending' ||\n        statusStartCrawler === 'pending' ? (\n          <div>Loading...</div>\n        ) : (\n          <Fragment>\n            <Box mb={'24px'} width={64}>\n              <TextField\n                title={'Secret'}\n                type=\"password\"\n                value={secret}\n                onChange={setSecret}\n              />\n            </Box>\n            <Box width={64}>\n              <Button\n                type=\"button\"\n                kind=\"brand\"\n                size=\"normal\"\n                text={\n                  isRunning === true\n                    ? 'Остановить круалинг'\n                    : '\"Начать крулинг\"'\n                }\n                onClick={\n                  isRunning === true\n                    ? () => stopCrawler(secret)\n                    : () => startCrawler(secret)\n                }\n              />\n            </Box>\n          </Fragment>\n        )}\n      </Block>\n    </Flex>\n  )\n}\n","export const treeDefault = {\n  type: 'tree',\n  depType: 'default',\n  packageNamePattern: '',\n  source: 'auto',\n}\n\nexport const versionsDefault = {\n  type: 'versions',\n  depType: 'default',\n  packageNamePattern: '',\n  source: 'auto',\n  versionRange: '',\n}\n\nexport const usageDefault = {\n  type: 'usage',\n  depType: 'default',\n  packageNamePattern: '',\n  source: 'auto',\n  versionRange: '',\n}\n\nexport const defaultTypes = {\n  tree: treeDefault,\n  usage: usageDefault,\n  versions: versionsDefault,\n}\n","import { Box } from '@qiwi/pijma-core'\nimport { RadioField, TextField } from '@qiwi/pijma-desktop'\n\nimport React from 'react'\n\nimport { TReportProps } from './common'\n\nexport const TreeReportForm = ({ data, setData }: TReportProps) => (\n  <div>\n    <Box mb={'24px'} width={64}>\n      <TextField\n        title={'packageNamePattern'}\n        type=\"text\"\n        value={data.packageNamePattern}\n        onChange={(data) => setData({ type: 'packageNamePattern', data })}\n      />\n    </Box>\n    <Box mb={'24px'}>\n      <RadioField\n        title=\"depType\"\n        options={[\n          {\n            label: 'default',\n            value: 'default',\n          },\n          {\n            label: 'optional',\n            value: 'optional',\n          },\n          {\n            label: 'peer',\n            value: 'peer',\n          },\n          {\n            label: 'dev',\n            value: 'dev',\n          },\n          {\n            label: 'all',\n            value: 'all',\n          },\n        ]}\n        value={data.depType}\n        onChange={(data) => setData({ type: 'depType', data })}\n      />\n    </Box>\n    <Box mb={'24px'}>\n      <RadioField\n        title=\"source\"\n        options={[\n          {\n            label: 'auto',\n            value: 'auto',\n          },\n          {\n            label: 'lock',\n            value: 'lock',\n          },\n          {\n            label: 'package',\n            value: 'package',\n          },\n        ]}\n        value={data.source}\n        onChange={(data) => setData({ type: 'source', data })}\n      />\n    </Box>\n  </div>\n)\n","import React from 'react'\nimport { Box } from '@qiwi/pijma-core'\nimport { RadioField, TextField } from '@qiwi/pijma-desktop'\nimport { TReportProps } from './common'\n\nexport const UsageReportForm = ({ data, setData }: TReportProps) => (\n  <div>\n    <Box mb={'24px'} width={64}>\n      <TextField\n        title={'packageNamePattern'}\n        type=\"text\"\n        value={data.packageNamePattern}\n        onChange={(data) => setData({ type: 'packageNamePattern', data })}\n      />\n    </Box>\n    <Box mb={'24px'} width={64}>\n      <TextField\n        title={'versionRange'}\n        type=\"text\"\n        value={data.versionRange || ''}\n        onChange={(data) => setData({ type: 'versionRange', data })}\n      />\n    </Box>\n    <Box mb={'24px'}>\n      <RadioField\n        title=\"depType\"\n        options={[\n          {\n            label: 'optional',\n            value: 'optional',\n          },\n          {\n            label: 'peer',\n            value: 'peer',\n          },\n          {\n            label: 'default',\n            value: 'default',\n          },\n          {\n            label: 'dev',\n            value: 'dev',\n          },\n          {\n            label: 'all',\n            value: 'all',\n          },\n        ]}\n        value={data.depType}\n        onChange={(data) => setData({ type: 'depType', data })}\n      />\n    </Box>\n    <Box mb={'24px'}>\n      <RadioField\n        title=\"source\"\n        options={[\n          {\n            label: 'auto',\n            value: 'auto',\n          },\n          {\n            label: 'lock',\n            value: 'lock',\n          },\n          {\n            label: 'package',\n            value: 'package',\n          },\n        ]}\n        value={data.source}\n        onChange={(data) => setData({ type: 'source', data })}\n      />\n    </Box>\n  </div>\n)\n","import React from 'react'\nimport { Box } from '@qiwi/pijma-core'\nimport { RadioField, TextField } from '@qiwi/pijma-desktop'\nimport { TReportProps } from './common'\n\nexport const VersionsReportForm = ({ data, setData }: TReportProps) => (\n  <div>\n    <Box mb={'24px'} width={64}>\n      <TextField\n        title={'packageNamePattern'}\n        type=\"text\"\n        value={data.packageNamePattern}\n        onChange={(data) => setData({ type: 'packageNamePattern', data })}\n      />\n    </Box>\n    <Box mb={'24px'} width={64}>\n      <TextField\n        title={'versionRange'}\n        type=\"text\"\n        value={data.versionRange || ''}\n        onChange={(data) => setData({ type: 'versionRange', data })}\n      />\n    </Box>\n    <Box mb={'24px'}>\n      <RadioField\n        title=\"depType\"\n        options={[\n          {\n            label: 'optional',\n            value: 'optional',\n          },\n          {\n            label: 'peer',\n            value: 'peer',\n          },\n          {\n            label: 'default',\n            value: 'default',\n          },\n          {\n            label: 'dev',\n            value: 'dev',\n          },\n          {\n            label: 'all',\n            value: 'all',\n          },\n        ]}\n        value={data.depType}\n        onChange={(data) => setData({ type: 'depType', data })}\n      />\n    </Box>\n    <Box mb={'24px'}>\n      <RadioField\n        title=\"source\"\n        options={[\n          {\n            label: 'auto',\n            value: 'auto',\n          },\n          {\n            label: 'lock',\n            value: 'lock',\n          },\n          {\n            label: 'package',\n            value: 'package',\n          },\n        ]}\n        value={data.source}\n        onChange={(data) => setData({ type: 'source', data })}\n      />\n    </Box>\n  </div>\n)\n","import { Block, Card, Flex, Box } from '@qiwi/pijma-core'\nimport { Button, HeaderMenu } from '@qiwi/pijma-desktop'\nimport React, { useReducer } from 'react'\nimport { reportService } from '../../../service'\nimport { useAsync } from '../../../hooks/useAsyncExecutor'\n\nimport {\n  TreeReportForm,\n  VersionsReportForm,\n  UsageReportForm,\n  TReportProps,\n} from '../../org/reportForm'\nimport { defaultTypes, treeDefault } from './constants'\n\nfunction downloadObjectAsJson(exportObj: any, exportName: string) {\n  const dataStr =\n    'data:text/json;charset=utf-8,' +\n    encodeURIComponent(JSON.stringify(exportObj))\n  const downloadAnchorNode = document.createElement('a')\n  downloadAnchorNode.setAttribute('href', dataStr)\n  downloadAnchorNode.setAttribute('download', exportName + '.json')\n  document.body.appendChild(downloadAnchorNode) // required for firefox\n  downloadAnchorNode.click()\n  downloadAnchorNode.remove()\n}\n\nconst reducer = (\n  state: Record<string, string>,\n  action: Record<string, string>,\n) => {\n  if (action.type === 'type') {\n    return defaultTypes[action.data as 'usage' | 'versions' | 'tree']\n  }\n\n  return { ...state, [action.type]: action.data }\n}\n\nconst getReport = async ({\n  type,\n  depType,\n  packageNamePattern,\n  source,\n  versionRange,\n}: any) => {\n  versionRange = versionRange || undefined\n  const result = await reportService.getReport(type, {\n    depType,\n    packageNamePattern,\n    source,\n    versionRange,\n  })\n\n  downloadObjectAsJson(result, `${type}Report`)\n}\n\nexport const Reporter = () => {\n  const [data, setData] = useReducer(reducer, treeDefault)\n  const [execute, status] = useAsync(getReport)\n  return (\n    <Flex mt={6}>\n      <Block css={{ width: '100%', padding: '48px' }}>\n        <Card width={1} height={14} mb={'32px'}>\n          <HeaderMenu>\n            {[\n              {\n                title: 'tree',\n                active: data.type === 'tree',\n                onClick: () => setData({ type: 'type', data: 'tree' }),\n              },\n              {\n                title: 'usage',\n                active: data.type === 'usage',\n                onClick: () => setData({ type: 'type', data: 'usage' }),\n              },\n              {\n                title: 'versions',\n                active: data.type === 'versions',\n                onClick: () => setData({ type: 'type', data: 'versions' }),\n              },\n            ]}\n          </HeaderMenu>\n        </Card>\n        {\n          {\n            tree: (\n              <TreeReportForm\n                data={data as TReportProps['data']}\n                setData={setData}\n              />\n            ),\n            usage: (\n              <UsageReportForm\n                data={data as TReportProps['data']}\n                setData={setData}\n              />\n            ),\n            versions: (\n              <VersionsReportForm\n                data={data as TReportProps['data']}\n                setData={setData}\n              />\n            ),\n          }[data.type as 'usage' | 'versions' | 'tree']\n        }\n        <Box width={64}>\n          <Button\n            loading={status === 'pending'}\n            disabled={status === 'pending'}\n            type=\"button\"\n            kind=\"brand\"\n            size=\"normal\"\n            text=\"Получить отчет\"\n            onClick={() => execute(data)}\n          />\n        </Box>\n      </Block>\n    </Flex>\n  )\n}\n","import { fonts, injectGlobal, reset } from '@qiwi/pijma-core'\n\ninjectGlobal(\n  reset,\n  fonts,\n  `\n  html, body, #root{\n    height: 100%;\n    font-size: 16px;\n  }\n  body {\n    background: #F9F9F9;\n    line-height: 20px;\n    font-family: 'Museo Sans', sans-serif;\n    font-weight: 500;\n    overflow-x: hidden;\n  }\n  \n  a {\n    text-decoration: none;\n  }\n  \n  textarea, select, input, button { outline: none; }\n  \n  * {\n    outline: 0\n  }\n  \n  hr {\n    border: 0;\n    height: 0;\n    border-top: 1px solid rgba(0, 0, 0, 0.1);\n    border-bottom: 1px solid rgba(255, 255, 255, 0.3);\n  }\n  \n  .noselect {\n  -webkit-touch-callout: none; /* iOS Safari */\n    -webkit-user-select: none; /* Safari */\n     -khtml-user-select: none; /* Konqueror HTML */\n       -moz-user-select: none; /* Firefox */\n        -ms-user-select: none; /* Internet Explorer/Edge */\n            user-select: none; /* Non-prefixed version, currently\n                                  supported by Chrome and Opera */\n  }\n`,\n)\n","import '../layout'\n\nimport { styled } from '@qiwi/pijma-core'\n\nexport const Content = styled('main')`\n  flex: 1 0 auto;\n`\n","import { styled } from '@qiwi/pijma-core'\n\nexport const Root = styled('div')`\n  height: 100%;\n  width: 100%;\n`\n","import { styled } from '@qiwi/pijma-core'\n\nexport const Spreader = styled('div')`\n  display: flex;\n  flex-direction: column;\n  margin: 0 auto;\n  max-width: 1280px;\n  min-width: 400px;\n  > * {\n    padding: 0 50px !important;\n  }\n`\n","import { cache, CacheProvider, ThemeProvider, themes } from '@qiwi/pijma-core'\nimport React from 'react'\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'\n\nimport { Header } from '../org/header'\nimport { Crawler } from '../page/crawler'\nimport { Reporter } from '../page/reporter'\nimport { Content } from './content'\nimport { Root } from './root'\nimport { Spreader } from './spreader'\nfunction App() {\n  return (\n    <CacheProvider value={cache}>\n      <ThemeProvider theme={themes.orange}>\n        <Router>\n          <Root>\n            <Content>\n              <Header />\n              <Spreader>\n                <Switch>\n                  <Route path=\"/crawler\">\n                    <Crawler />\n                  </Route>\n                  <Route path=\"/\">\n                    <Reporter />\n                  </Route>\n                </Switch>\n              </Spreader>\n            </Content>\n          </Root>\n        </Router>\n      </ThemeProvider>\n    </CacheProvider>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.querySelector('#root'),\n)\n"],"sourceRoot":""}